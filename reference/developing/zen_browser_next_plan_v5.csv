ID,Area,Interaction,Zen_Behavior,Zen_Ref,UX_Spec_Ref,XBrowser_Current,XBrowser_Task,Suggested_Files,DependsOn,Priority,Milestone,Status,Done_Criteria,Test_Steps
META-NEXT-V5-001,Meta,本CSV用于追踪「Zen差距补齐：核心浏览能力/数据控制/高级管理/自定义」的下一阶段迭代,Zen 体验=路径短+状态可预期+弹层不被遮挡+基础浏览能力完整（缩放/全屏/清理数据/书签导入导出/下载管理）, ,docs/UX_SPEC.md,当前 merged_developing 为空且需要新的可执行任务队列,建立 NEXT-V5-* 任务拆解并确保每行可验收+可回归；实现后把 Status 从 todo 改为 done,reference/developing/zen_browser_next_plan_v5.csv, ,META,M15,done,本表可作为连续 12h 执行的任务队列且字段齐全,打开 CSV 抽查 10 行均有 Done_Criteria 与 Test_Steps
NEXT-V5-001,WebView2,基础缩放：Ctrl+±/0 与菜单项,Zen/主流浏览器支持 Ctrl+±/0 调整缩放且立刻生效并可重置, ,docs/UX_SPEC.md,当前未暴露 WebView2 ZoomFactor 且无快捷键,WebView2View 增加 zoomFactor Q_PROPERTY 与 zoomIn/zoomOut/zoomReset；BrowserWindow 增加 Zoom In/Out/Reset 命令与菜单/快捷键并驱动 focusedView,src/engine/webview2/WebView2View.*; ui/qml/BrowserWindow.qml; src/core/ShortcutStore.*, ,P0,M15,done,打开网页后 Ctrl+Plus/Ctrl+Minus/Ctrl+0 会改变网页缩放且不会崩溃,打开任意网页->按 Ctrl+Plus 两次->按 Ctrl+Minus 一次->按 Ctrl+0 重置；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-002,Urlbar,缩放指示器：显示百分比并一键重置,Zen 的缩放状态可见且可快速重置避免用户迷失, ,docs/UX_SPEC.md,当前缩放不可见,在地址栏右侧增加 ZoomIndicator（例如 110%）；点击重置；hover 显示 tooltip；reduceMotion 下不做复杂动画,ui/qml/BrowserWindow.qml; ui/qml/components/PopupManager.qml,NEXT-V5-001,P1,M15,done,缩放改变时指示器更新且点击可重置到 100%,打开网页->Ctrl+Plus 到 125%->观察指示器显示->点击指示器->回到 100%；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-003,Settings,缩放设置：默认缩放+按站点记忆开关,Zen 可配置偏好并让缩放状态可预期, ,docs/UX_SPEC.md,当前无缩放配置与持久化,AppSettings 增加 defaultZoom 与 rememberZoomPerSite；提供每站点 zoomMap 持久化；SettingsDialog 增加对应 UI,src/core/AppSettings.*; ui/qml/components/SettingsDialog.qml; tests/TestAppSettings.cpp,NEXT-V5-001,P1,M15,done,修改默认缩放后新打开的网页使用该缩放且开关可持久化,打开 Settings->Appearance->修改默认缩放为 110%->新建标签打开网页->默认 110%；重启后设置保持；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-004,WebView2,按站点缩放：同域名复用上次缩放,Zen/Arc 类体验：同一个站点缩放保持一致跨 tab, ,docs/UX_SPEC.md,当前缩放不持久且无法按站点应用,导航提交时读取 host；若 rememberZoomPerSite 开启则应用 zoomMap[host] 否则应用 defaultZoom；在用户触发 zoom 时写回 zoomMap,src/engine/webview2/WebView2View.*; src/core/AppSettings.*; ui/qml/BrowserWindow.qml,NEXT-V5-003,P0,M15,done,两个同域网页保持一致缩放且重启后仍按预期应用,开启按站点记忆->打开 https://example.com 缩放到 125%->新建标签再打开同域->自动 125%->重启后仍 125%；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-005,Navigation,停止加载：Esc/按钮可 stop 并与 reload 状态互斥,Zen/主流浏览器加载中显示停止按钮且 Esc 可中止加载, ,docs/UX_SPEC.md,reload 按钮仅显示加载中动效但无法 stop,WebView2View 增加 stop()；BrowserWindow 增加 nav-stop 命令与 Esc 快捷键；加载中将 reloadButton 行为切换为 stop 并显示合适图标,src/engine/webview2/WebView2View.*; ui/qml/BrowserWindow.qml; src/core/ShortcutStore.*, ,P1,M15,done,访问慢站点时点击按钮或按 Esc 可停止加载且 isLoading 变为 false,打开一个加载较慢页面->看到加载状态->按 Esc 或点击 stop->加载停止；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-006,Menus,打开本地文件：Ctrl+O 选择 html 并在当前标签打开,Zen/主流浏览器支持 Ctrl+O 打开本地文件并可继续导航, ,docs/UX_SPEC.md,当前无 Open File 入口,增加 Open File 命令与快捷键 Ctrl+O；使用 FileDialog 选择文件并导航到 file:///；支持打开图片与 html；失败 toast,ui/qml/BrowserWindow.qml; ui/qml/components/Shortcuts.qml; ui/qml/components/ToastHost.qml, ,P2,M15,done,选择本地 html 后能在 WebView2 中渲染且地址栏显示 file URL,菜单 File->Open File 或 Ctrl+O->选择一个本地 html->页面渲染；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-007,Window/Layout,全屏：F11 切换窗口全屏并隐藏无关 UI,Zen F11 全屏；Esc 退出；全屏时布局更专注, ,docs/UX_SPEC.md,当前无全屏切换,增加 toggle-fullscreen 命令与 F11；QML 设置 Window.visibility=FullScreen；全屏时隐藏标题区/侧栏可选并保持退出还原,ui/qml/BrowserWindow.qml; src/core/ShortcutStore.*; src/platform/windows/WindowChromeController.* (if needed), ,P1,M15,done,F11 可进出全屏且退出后 UI 状态还原,打开网页->按 F11 进入全屏->按 Esc 或 F11 退出->确认侧栏与地址栏状态一致；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-008,WebView2,Web 内容触发全屏（视频）与窗口全屏联动,网页 video 全屏会驱动浏览器进入内容全屏并可一键退出, ,docs/UX_SPEC.md,当前可能忽略 ContainsFullScreenElementChanged,监听 WebView2 ContainsFullScreenElementChanged；当网页进入全屏时切换窗口全屏并展示退出提示；退出时恢复,src/engine/webview2/WebView2View.*; ui/qml/BrowserWindow.qml; ui/qml/components/ToastHost.qml,NEXT-V5-007,P2,M15,todo,视频站点进入全屏后窗口进入全屏且退出后恢复,打开视频站点->点击播放器全屏->窗口进入全屏->按 Esc 退出->窗口恢复；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-009,Output,查看页面源代码：菜单/右键打开 SourceViewer,Zen 右键可查看源代码并在新标签展示, ,docs/UX_SPEC.md,当前无 View Source 能力,增加 view-source 命令；通过 ExecuteScript 获取 outerHTML 并打开内部 SourceViewer 页面展示；支持复制与查找,src/engine/webview2/WebView2View.*; ui/qml/BrowserWindow.qml; ui/qml/components/FindBar.qml; ui/qml/components/ContextMenu.qml; ui/qml/components/OverlayHost.qml, ,P2,M15,todo,可在新标签看到当前页面 HTML 文本且可复制,打开网页->右键->View Source->出现新标签显示 HTML->Ctrl+F 查找->Ctrl+A 复制；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-010,Output,SourceViewer 细节：语法高亮与大文件性能,查看源代码在大页面下也不卡且易读, ,docs/UX_SPEC.md,SourceViewer 尚无高亮与行号（待实现）,SourceViewer 增加行号与基础高亮（HTML tag/attr）；对大文本使用延迟渲染或分页；支持保存到文件,ui/qml/components/SourceViewer.qml (new); ui/qml/BrowserWindow.qml,NEXT-V5-009,P3,M15,todo,打开大型页面源代码时滚动与搜索仍流畅且可另存为,打开较大网页->View Source->快速滚动与 Ctrl+F->无明显卡顿；点击 Save->生成文件；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-011,Core,缩放配置单测：序列化与回读,关键配置需可回归避免升级后缩放丢失, ,docs/UX_SPEC.md,TestAppSettings 未覆盖缩放相关字段,扩展 TestAppSettings 覆盖 defaultZoom/rememberZoomPerSite/zoomMap 的保存与回读并校验边界值,tests/TestAppSettings.cpp; src/core/AppSettings.*,NEXT-V5-003,P2,M15,done,ctest 覆盖新增用例且通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-012,Meta/Process,模块验收与归档(M15 Core Browsing),每个模块完成后有可回归测试并刷新 merged, ,docs/UX_SPEC.md,M15 任务尚未归档,完成 NEXT-V5-001..011 后把对应 Status 置为 done；运行合并脚本刷新 merged CSV,reference/developing/zen_browser_next_plan_v5.csv; scripts/merge_plans.ps1,NEXT-V5-001,P0,M15,done,merged_developing 中不再包含 NEXT-V5-001..012 且 counts 更新,修改 Status->done；运行 powershell -NoProfile -ExecutionPolicy Bypass -File scripts/merge_plans.ps1 -IncludeLayout；检查 reference/zen_browser_merged_developing.csv
NEXT-V5-013,Privacy,清理浏览数据对话框（时间范围+类型）,Zen/主流浏览器提供 Clear browsing data 并支持时间范围与多类型清理, ,docs/UX_SPEC.md,当前缺少统一清理入口,在 Settings->Privacy 增加 ClearDataDialog：选择时间范围（1h/24h/7d/all）与类型（历史/cookies/cache/downloads/permissions）；确认后触发清理并 toast,ui/qml/components/SettingsDialog.qml; ui/qml/components/ClearDataDialog.qml (new); ui/qml/BrowserWindow.qml, ,P0,M16,todo,可从设置打开清理对话框并执行清理流程,访问3个站点->打开清理对话框->选择清理历史(all)->确认->HistoryPanel 为空；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-014,WebView2,清理 WebView2 缓存与 cookies（API 接入）,清理应覆盖 WebView2 profile 的缓存/cookies 等真实数据, ,docs/UX_SPEC.md,当前未接入 ClearBrowsingDataAsync,"在 WebView2View/BrowserController 增加 clearBrowsingData(kindMask,timeRange)；调用 WebView2 Profile ClearBrowsingDataAsync；暴露给 QML 并与 ClearDataDialog 串联",src/engine/webview2/WebView2View.*; src/core/BrowserController.*; ui/qml/BrowserWindow.qml,NEXT-V5-013,P0,M16,todo,清理 cookies 后重新打开站点不再处于登录态（最小可验收）,登录一个测试站点或设置 cookie->执行清理 cookies->刷新->登录态消失；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-015,Data,清理本地数据：History/Downloads/Permissions 统一清理,清理对话框除内核数据外还应清理本地 store 并保持一致, ,docs/UX_SPEC.md,各 store 独立且缺少统一清理 API,HistoryStore 增加 clearRange；DownloadModel 增加 clearAll/clearCompleted；SitePermissionsStore 增加 resetAll；ClearDataDialog 根据选项调用对应 API,src/core/HistoryStore.*; src/core/DownloadModel.*; src/core/SitePermissionsStore.*; ui/qml/components/ClearDataDialog.qml,NEXT-V5-013,P1,M16,todo,选择清理历史/下载/权限后对应面板立即为空且重启不恢复,产生历史+下载+权限记录->清理所选类型->打开面板确认为空->重启确认仍为空；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-016,WebView2,Cookie 管理：列出当前站点 cookies 并可逐条删除,Zen Site Data 面板可查看并清理 cookies, ,docs/UX_SPEC.md,当前无 cookie 列表能力,"封装 WebView2 CookieManager：getCookies(url) 返回简化列表；deleteCookie(domain,name,path)；提供 QAbstractListModel 暴露给 QML",src/engine/webview2/WebView2CookieModel.* (new); src/engine/webview2/WebView2View.*; src/app/main.cpp, ,P1,M16,todo,在 QML 中可显示 cookies 列表并能删除一条使其消失,访问会写 cookie 的站点->打开 Site Data->看到 cookies->删除一条->刷新->该 cookie 不再出现；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-017,SiteDataPanel,Site Data 面板：cookies 列表+一键清理当前站点,Zen Site Data 面板入口短且不遮挡页面, ,docs/UX_SPEC.md,当前无站点数据面板或信息不足,新增 SiteDataPanel：展示 cookie 列表与删除按钮；一键清理当前站点 cookies；与 PopupManager/OverlayHost 正确 layering,ui/qml/components/SiteDataPanel.qml (new); ui/qml/BrowserWindow.qml; ui/qml/components/PopupManager.qml; src/engine/webview2/WebView2CookieModel.* (new),NEXT-V5-016,P1,M16,todo,从地址栏站点图标可打开 Site Data 面板并完成清理,打开站点->点击站点信息->进入 Site Data->清理 cookies->刷新->登录态消失或 cookie 为空；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-018,SiteInfo,站点信息面板：安全状态+快捷入口（权限/站点数据）,Zen 点击锁形图标打开站点信息面板并管理权限/站点数据, ,docs/UX_SPEC.md,当前站点信息入口不完整或信息不足,增加 SiteInfoPanel：展示 scheme/host/安全提示；提供按钮打开 PermissionsPanel 与 SiteDataPanel；确保弹层不遮挡,ui/qml/components/SiteInfoPanel.qml (new); ui/qml/BrowserWindow.qml; ui/qml/components/PopupManager.qml,NEXT-V5-017,P1,M16,todo,点击地址栏左侧图标可打开面板并跳转到权限/站点数据,打开 https 站点->点击锁图标->显示 host 与安全提示->点击 Permissions/Site Data 按钮->对应面板打开；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-019,Permissions,权限中心增强：按类型过滤+搜索+一键重置,权限管理需要可查询与批量重置, ,docs/UX_SPEC.md,PermissionsCenter 仅列表与重置能力有限,PermissionsCenter 增加类型过滤（通知/摄像头/麦克风等）；搜索；一键重置全部站点；显示统计,ui/qml/components/PermissionsCenter.qml; src/core/SitePermissionsStore.*, ,P2,M16,todo,可按类型筛选且一键重置后列表为空,触发2种权限记录->打开权限中心->按类型筛选->重置全部->列表为空；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-020,Data,清理相关单测：History clearRange 与 Permissions resetAll,数据清理是高风险路径必须有回归测试, ,docs/UX_SPEC.md,现有单测未覆盖批量清理 API,扩展 TestHistoryStore/TestSitePermissionsStore 覆盖 clearRange/resetAll 与时间边界；确保 ctest 通过,tests/TestHistoryStore.cpp; tests/TestSitePermissionsStore.cpp; src/core/HistoryStore.*; src/core/SitePermissionsStore.*,NEXT-V5-015,P1,M16,todo,新增用例覆盖且 ctest 通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-021,Meta/Process,模块验收与归档(M16 Privacy/Data Control),每个模块完成后必须可回归测试并刷新汇总, ,docs/UX_SPEC.md,M16 任务尚未归档,完成 NEXT-V5-013..020 后把 Status 置为 done；运行合并脚本刷新 merged CSV,reference/developing/zen_browser_next_plan_v5.csv; scripts/merge_plans.ps1,NEXT-V5-013,P0,M16,todo,merged_developing 中不再包含 NEXT-V5-013..021 且 areas/counts 更新,修改 Status->done；运行 powershell -NoProfile -ExecutionPolicy Bypass -File scripts/merge_plans.ps1 -IncludeLayout；检查 reference/zen_browser_merged_counts_by_area.csv
NEXT-V5-022,Data,书签：引入文件夹层级与排序,Zen 书签支持文件夹与拖拽排序且跨重启保持, ,docs/UX_SPEC.md,BookmarksStore 仅支持扁平列表（无 folder）,扩展 BookmarksStore schema：itemType(bookmark/folder)；parentId；order；提供 createFolder/rename/move/reorder；迁移旧数据,src/core/BookmarksStore.*; src/core/BookmarksFilterModel.*; tests/TestBookmarksStore.cpp, ,P0,M17,todo,可创建文件夹并把书签移动进去且重启后结构保持,收藏2个书签->创建文件夹->移动其中一个->重启->结构保持；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-023,Panels/Web,书签面板：树状视图与文件夹管理,书签管理路径短且支持展开/折叠文件夹, ,docs/UX_SPEC.md,BookmarksPanel 为简单列表（无树）,BookmarksPanel 改为 TreeView/嵌套 ListView；支持展开折叠；右键菜单：新建文件夹/重命名/删除/在新标签打开全部,ui/qml/components/BookmarksPanel.qml; ui/qml/components/ContextMenu.qml; ui/qml/components/PopupManager.qml,NEXT-V5-022,P1,M17,todo,文件夹可展开折叠且菜单操作生效不被裁剪,打开书签面板->创建文件夹->展开/折叠->右键重命名->删除；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-024,DnD,书签拖拽：排序与移动到文件夹,Zen 支持拖拽调整书签顺序与归档到文件夹, ,docs/UX_SPEC.md,书签列表不支持拖拽,BookmarksPanel 增加 Drag/Drop：同级 reorder；拖到 folder 进入；拖出返回根；更新 BookmarksStore 并持久化,ui/qml/components/BookmarksPanel.qml; src/core/BookmarksStore.*,NEXT-V5-022,P1,M17,todo,拖拽可改变顺序与父文件夹且重启后保持,新建3个书签->拖拽调整顺序->拖到文件夹->重启->顺序与层级保持；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-025,Data,书签导入导出：HTML（Netscape Bookmark File）,主流浏览器支持从 HTML 导入导出书签便于迁移, ,docs/UX_SPEC.md,无导入导出能力,BookmarksStore 实现 exportToHtml/importFromHtml；支持 folder；解析常见 HTML；单测覆盖 roundtrip 与错误处理,src/core/BookmarksStore.*; tests/TestBookmarksStore.cpp,NEXT-V5-022,P2,M17,todo,TestBookmarksStore 覆盖 import/export roundtrip 且 ctest 通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-026,Settings,书签导入导出入口：Settings/Bookmarks,迁移路径短：导入导出入口在书签或设置内, ,docs/UX_SPEC.md,无 UI 入口,在 SettingsDialog 增加 Bookmarks 区块：Import/Export 按钮；使用 FileDialog 选择路径；展示错误 toast,ui/qml/components/SettingsDialog.qml; ui/qml/components/BookmarksPanel.qml; ui/qml/BrowserWindow.qml,NEXT-V5-025,P2,M17,todo,可从设置导入导出并在 UI 中看到变化,打开 Settings->Bookmarks->Export->生成文件；删除一个书签->Import->书签恢复；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-027,Data,书签单测：folder/move/import/export,数据层需可回归避免重构回归, ,docs/UX_SPEC.md,TestBookmarksStore 覆盖不足,扩展 TestBookmarksStore 覆盖：folder create/rename/move；reorder；HTML import/export；错误场景,tests/TestBookmarksStore.cpp; src/core/BookmarksStore.*,NEXT-V5-025,P1,M17,todo,新增用例覆盖且 ctest 通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-028,Data,历史：按域名/时间过滤与导出 CSV,历史管理需要搜索过滤与可导出便于诊断迁移, ,docs/UX_SPEC.md,HistoryStore 缺少导出与批量删除,"HistoryStore 增加 query(domain,range,limit)；exportToCsv(path,range)；支持删除单条与按域名批量删除",src/core/HistoryStore.*; tests/TestHistoryStore.cpp, ,P1,M17,todo,可导出 CSV 且包含 title/url/time 且删除 API 生效,运行单测覆盖导出与删除；手动访问3站点后在 HistoryPanel 验证删除生效；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-029,Panels/Web,历史面板：搜索+分组+右键删除/复制,Zen 历史按天分组且可快速搜索与清理, ,docs/UX_SPEC.md,HistoryPanel 仅支持简单列表与清理能力有限,HistoryPanel 增加搜索框；按天分组；条目右键菜单：Open/Copy URL/Delete；支持多选批量删除,ui/qml/components/HistoryPanel.qml; ui/qml/components/ContextMenu.qml; src/core/HistoryFilterModel.*,NEXT-V5-028,P1,M17,todo,搜索可过滤并可删除单条/多条且 UI 不被裁剪,产生历史记录->打开历史面板->搜索关键字->右键删除一条->刷新页面->该条不再出现；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-030,Data,历史单测：query/export/delete,历史是核心数据必须可回归, ,docs/UX_SPEC.md,TestHistoryStore 未覆盖导出与批量删除,扩展 TestHistoryStore：覆盖 query domain/range；exportToCsv 输出内容；deleteByDomain 与 deleteEntry,tests/TestHistoryStore.cpp; src/core/HistoryStore.*,NEXT-V5-028,P1,M17,todo,ctest 覆盖新增用例且通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-031,Meta/Process,模块验收与归档(M17 Bookmarks/History Pro),模块完成后刷新汇总与统计, ,docs/UX_SPEC.md,M17 任务尚未归档,完成 NEXT-V5-022..030 后把 Status 置为 done；运行合并脚本刷新 merged CSV,reference/developing/zen_browser_next_plan_v5.csv; scripts/merge_plans.ps1,NEXT-V5-022,P0,M17,todo,merged_developing 中不再包含 NEXT-V5-022..031 且 areas/counts 更新,修改 Status->done；运行 powershell -NoProfile -ExecutionPolicy Bypass -File scripts/merge_plans.ps1 -IncludeLayout；检查 reference/zen_browser_merged_developed.csv
NEXT-V5-032,Downloads,下载持久化：跨重启保留列表与状态,主流浏览器下载列表可跨会话查看并支持打开位置, ,docs/UX_SPEC.md,DownloadModel 仅内存态且重启丢失,设计 downloads.json schema（id/url/path/state/bytes/finishedAt）；DownloadModel load/save；预留 version 便于迁移,src/core/DownloadModel.*; src/core/AppPaths.*; tests/TestDownloadModel.cpp, ,P1,M18,todo,重启后下载列表仍在且已完成项状态正确,完成一个下载->关闭/重启->打开下载面板->仍可见且可 open folder；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-033,Downloads,下载面板增强：分组/搜索/批量清理,下载管理路径短：完成/进行中分组且可快速清理, ,docs/UX_SPEC.md,DownloadsDialog 信息密度与操作不足,DownloadsDialog 增加分组（In progress/Completed/Failed）；搜索；批量清理 completed；显示速度/ETA（可选）,ui/qml/components/DownloadsDialog.qml; src/core/DownloadModel.*,NEXT-V5-032,P2,M18,todo,可搜索下载项并一键清理 completed 且不影响进行中,产生>=3条下载（至少1完成）->打开下载面板->搜索->清理 completed->仅进行中保留；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-034,Downloads,下载动作补齐：Pause/Resume/Cancel/Open/Open Folder/Copy URL,Zen 下载项动作齐全且不需要额外页面, ,docs/UX_SPEC.md,下载项动作不完整,DownloadModel 增加对应 invokable；DownloadsDialog 增加按钮与右键菜单；失败显示原因与重试,src/core/DownloadModel.*; ui/qml/components/DownloadsDialog.qml; ui/qml/components/ContextMenu.qml,NEXT-V5-032,P1,M18,todo,下载项可暂停/继续/取消且 Open/Open Folder 可用,开始一个大文件下载->暂停->继续->完成->Open Folder；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-035,Toast,下载通知：开始/完成/失败 toast 与工具栏 badge,下载完成提示不阻塞并可一键打开文件夹, ,docs/UX_SPEC.md,缺少明确下载通知,badge 显示进行中数量；完成 toast 提供 Open Folder；失败 toast 提供 Retry；确保 overlay 不遮挡,ui/qml/BrowserWindow.qml; ui/qml/components/ToastHost.qml; src/core/DownloadModel.*,NEXT-V5-032,P2,M18,todo,下载完成时出现 toast 且点击可打开文件夹,完成一个下载->出现 toast->点击 Open Folder->资源管理器打开；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-036,NativeUtils,打开文件/文件夹：统一 ShellExecute 封装,打开下载文件与目录应稳定且路径带空格可用, ,docs/UX_SPEC.md,打开路径逻辑分散且错误处理不一致,新增 NativeUtils.openPath/openFolder；Downloads/Bookmarks/Diagnostics 复用；处理错误 toast,src/platform/windows/NativeUtils.* (new); src/app/main.cpp; ui/qml/BrowserWindow.qml, ,P3,M18,todo,openPath/openFolder 在路径含空格时可用且失败有提示,用含空格的临时目录下载文件->Open Folder->成功；将路径设为不存在->提示错误；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-037,Downloads,下载持久化单测与回归,下载数据是用户资产必须可回归, ,docs/UX_SPEC.md,TestDownloadModel 未覆盖 save/load,扩展 TestDownloadModel 覆盖：保存后回读；completed/failed 状态；清理 completed；schema version,tests/TestDownloadModel.cpp; src/core/DownloadModel.*,NEXT-V5-032,P1,M18,todo,ctest 覆盖新增用例且通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-038,Meta/Process,模块验收与归档(M18 Downloads Pro),模块完成后刷新汇总, ,docs/UX_SPEC.md,M18 任务尚未归档,完成 NEXT-V5-032..037 后把 Status 置为 done；运行合并脚本刷新 merged CSV,reference/developing/zen_browser_next_plan_v5.csv; scripts/merge_plans.ps1,NEXT-V5-032,P0,M18,todo,merged_developing 中不再包含 NEXT-V5-032..038 且 counts 更新,修改 Status->done；运行 powershell -NoProfile -ExecutionPolicy Bypass -File scripts/merge_plans.ps1 -IncludeLayout；检查 reference/zen_browser_merged_counts_by_area.csv
NEXT-V5-039,Tabs,Tab Group 折叠/展开并持久化,Zen 的 group/folder 可折叠减少噪音且状态可预期, ,docs/UX_SPEC.md,TabGroupModel 无折叠状态,TabGroupModel 增加 collapsed 字段与 setCollapsed；SessionStore 保存/恢复；侧栏 group header 点击切换,src/core/TabGroupModel.*; src/core/SessionStore.*; ui/qml/BrowserWindow.qml; tests/TestSessionStore.cpp, ,P1,M19,todo,折叠后组内 tab 隐藏且重启后折叠状态保持,创建一个 group 并放入2个 tab->点击 header 折叠->重启->仍折叠；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-040,Tabs,侧栏 group header 交互细节：hover/右键/多选不退化,Zen 的 group header 有清晰可点区域且右键菜单路径短, ,docs/UX_SPEC.md,group header 交互细节不足,group header 增加右键菜单：Rename/Delete/Collapse All/Expand All；保证 PopupManager 不裁剪；多选时批量动作一致,ui/qml/BrowserWindow.qml; ui/qml/components/ContextMenu.qml; ui/qml/components/PopupManager.qml,NEXT-V5-039,P2,M19,todo,右键菜单完整可见且批量操作不崩溃,右键 group header->Rename->生效；右键->Collapse All->所有组折叠；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-041,Tabs,Recently Closed：列表+菜单+恢复策略,Zen 提供最近关闭列表与 Ctrl+Shift+T 恢复且顺序可预期, ,docs/UX_SPEC.md,仅支持恢复最后一个 tab 或无列表,BrowserController 维护最近关闭栈（含 title/url/workspaceId）；菜单显示最近 10 个并可点击恢复；支持清空列表；持久化到 SessionStore,src/core/BrowserController.*; src/core/SessionStore.*; ui/qml/BrowserWindow.qml; tests/TestSessionStore.cpp, ,P1,M19,todo,可从菜单恢复任意一条最近关闭记录且重启后列表仍在,关闭3个 tab->打开菜单->看到 3 条->点击第2条恢复->重启->列表仍有剩余；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-042,Windows,Move Tab to New Window 与 Move Tab to Workspace,Zen 支持把 tab 移到新窗口或其它 workspace 便于整理, ,docs/UX_SPEC.md,缺少跨窗口/跨 workspace 移动入口,Tab 右键菜单增加：Move to New Window（启动新进程并打开 url）；Move to Workspace（选择目标 workspace）；移动后原处关闭并保持历史,ui/qml/BrowserWindow.qml; src/app/main.cpp; src/core/WorkspaceModel.*; src/core/TabModel.*, ,P2,M19,todo,可把当前 tab 移到新窗口或其它 workspace 且不会丢失,右键 tab->Move to New Window->新窗口打开同 url；右键 tab->Move to Workspace->切换 workspace 验证；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-043,Workspaces,Workspace 管理器：重命名/排序/删除/复制,Zen Workspaces 管理路径短且支持整理, ,docs/UX_SPEC.md,WorkspaceModel 仅支持新增与切换,新增 WorkspaceManagerDialog：列出 workspaces；rename/reorder/delete/duplicate；删除时迁移 tabs 到默认 workspace；持久化,ui/qml/components/WorkspaceManagerDialog.qml (new); ui/qml/BrowserWindow.qml; src/core/WorkspaceModel.*; tests/TestWorkspaceModel.cpp, ,P1,M19,todo,可在对话框中重命名/排序并重启保持；删除 workspace 不崩溃且 tabs 合理处理,新建2个 workspace->打开管理器->重命名并排序->重启->保持；删除一个->tabs 迁移到默认；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-044,WebView2,捕获网页预览图：CapturePreview API 暴露给 QML,Zen 的 tab hover/preview 需要稳定的缩略图来源, ,docs/UX_SPEC.md,当前无 tab 缩略图能力,"WebView2View 实现 capturePreview(width,height)->QImage/PNG file；提供异步回调与节流；失败返回空",src/engine/webview2/WebView2View.*; src/app/main.cpp, ,P2,M19,todo,可捕获当前页面预览并在 QML Image 显示,打开网页->触发 capturePreview->看到缩略图；重复触发不崩溃；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-045,Tabs,TabModel 缩略图缓存：LRU 与释放策略,预览图不应无限占用内存且应更新及时, ,docs/UX_SPEC.md,TabModel 未存 thumbnail,TabModel 增加 thumbnail role（QImage/QUrl）；在 tab 切换/加载完成时异步捕获；实现 LRU 限制（例如 30 张）；reduceMotion 可降低频率,src/core/TabModel.*; ui/qml/BrowserWindow.qml,NEXT-V5-044,P2,M19,todo,切换多个 tab 后 hover 可看到对应预览且内存不持续增长,打开10个 tab->来回切换->观察预览更新；监控内存不持续增长；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-046,Glance,Tab hover 预览弹层：不被裁剪且靠近边缘自动翻转,Zen 的 preview tooltip 永不被窗口边缘吃掉并可快速扫览, ,docs/UX_SPEC.md,当前无 hover preview,使用 PopupManager 显示 TabPreviewPopup：thumbnail+title+url；边缘自动翻转；延迟 300ms 出现；移出即关闭,ui/qml/BrowserWindow.qml; ui/qml/components/PopupManager.qml; ui/qml/components/TabPreviewPopup.qml (new),NEXT-V5-045,P1,M19,todo,hover tab 后出现预览且靠近窗口边缘仍完整可见,缩小窗口->hover 最底部 tab->预览弹层自动翻转且完整；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-047,Tabs,Tab/Workspace 新增单测：group collapse 与 recently closed,高风险状态机需要单测避免回归, ,docs/UX_SPEC.md,缺少折叠与 recently closed 的单测覆盖,扩展 TestTabModel/TestSessionStore 覆盖 group collapsed 持久化；recentlyClosed push/pop/limit；restore 行为,tests/TestTabModel.cpp; tests/TestSessionStore.cpp; src/core/TabModel.*; src/core/SessionStore.*,NEXT-V5-039,P2,M19,todo,ctest 覆盖新增用例且通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-048,Meta/Process,模块验收与归档(M19 Tabs/Workspaces/Preview),完成后刷新 merged 与统计, ,docs/UX_SPEC.md,M19 任务尚未归档,完成 NEXT-V5-039..047 后把 Status 置为 done；运行合并脚本刷新 merged CSV,reference/developing/zen_browser_next_plan_v5.csv; scripts/merge_plans.ps1,NEXT-V5-039,P0,M19,todo,merged_developing 中不再包含 NEXT-V5-039..048 且 counts 更新,修改 Status->done；运行 powershell -NoProfile -ExecutionPolicy Bypass -File scripts/merge_plans.ps1 -IncludeLayout；检查 reference/zen_browser_merged_areas.csv
NEXT-V5-049,Theme,Theme 编辑器：Accent/Radius/Separation 可调,Zen 主题设置可调整主色与圆角间距并即时反馈, ,docs/UX_SPEC.md,ThemesDialog 仅切换 themeId 无细粒度参数,AppSettings 增加 themeAccent/themeRadius/themeSeparation；ThemeController 将其映射到 QML theme vars；Settings/Theme 页面提供 ColorDialog/Slider,src/core/AppSettings.*; src/core/ThemeController.*; ui/qml/components/ThemesDialog.qml; ui/qml/components/SettingsDialog.qml; tests/TestThemeSystem.cpp, ,P2,M20,todo,调整参数后 UI 颜色/圆角/间距即时变化且重启保持,打开 Themes->调整 accent 与 radius->观察侧栏与按钮变化->重启保持；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-050,Workspaces/Theme,每 Workspace 主题覆盖：切换 workspace 自动切换 accent,Zen 可为不同 workspace 设置不同的主题风格帮助区分上下文, ,docs/UX_SPEC.md,workspace 没有主题字段,WorkspaceModel 增加 workspaceAccent/themeOverride 字段并持久化；切换 workspace 时 ThemeController 选择 workspace override；UI 提供设置入口,src/core/WorkspaceModel.*; src/core/ThemeController.*; ui/qml/BrowserWindow.qml; tests/TestWorkspaceModel.cpp,NEXT-V5-049,P3,M20,todo,两个 workspace 设置不同 accent 后切换时 UI 主色随之变化且重启保持,为 workspace A/B 设置不同 accent->在 A/B 间切换->颜色变化->重启保持；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-051,Mods,Mods 注入网页：启用后对所有页面生效且可实时更新,Zen Mods 可注入 CSS 改变网页外观且开关即时生效, ,docs/UX_SPEC.md,ModsModel 有 combinedCss 但未确认已注入 WebView2,WebView2View 增加 setUserCss(css)；通过 AddScriptToExecuteOnDocumentCreated 注入 style；监听 ModsModel.combinedCssChanged 并更新所有 view；提供开关,src/core/ModsModel.*; src/engine/webview2/WebView2View.*; ui/qml/BrowserWindow.qml, ,P2,M20,todo,启用一个简单 CSS mod 后页面背景/字体变化且新开 tab 自动应用,新建 mod：body{background:red;}->打开网页->背景变红->禁用->恢复；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-052,Sidebar/CustomizableUI,侧栏顶部按钮可自定义：显示/隐藏/排序,Zen 顶部按钮区可定制以适配不同使用习惯, ,docs/UX_SPEC.md,顶部按钮固定且不可配置,定义 SidebarButtonsStore（JSON）；支持显示/隐藏与排序；BrowserWindow 按配置渲染；Settings 提供拖拽排序 UI,src/core/SidebarButtonsStore.* (new); ui/qml/BrowserWindow.qml; ui/qml/components/SettingsDialog.qml; tests/TestAppSettings.cpp, ,P3,M20,todo,用户可隐藏一个按钮并拖拽排序且重启保持,Settings->Sidebar->隐藏 Downloads 按钮->侧栏顶部消失->拖拽排序->重启保持；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-053,Accessibility,无障碍：关键控件 accessibleName 与键盘导航,主流浏览器在键盘与读屏下可操作且焦点可见, ,docs/UX_SPEC.md,QML 控件缺少 accessibleName 与 focus ring,为地址栏/侧栏tab列表/主要按钮/对话框控件补齐 Accessible.name；统一 focus ring 样式；Tab/Shift+Tab 导航顺序可预期,ui/qml/BrowserWindow.qml; ui/qml/components/*.qml, ,P2,M20,todo,仅用键盘可完成常用流程且焦点可见,仅键盘：Ctrl+L 输入 URL 回车->Ctrl+K 切换 tab->Alt 打开菜单->打开 Settings->Esc 关闭；观察焦点可见；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-054,Core/UI,自定义相关单测：theme/workspace/sidebar buttons,自定义配置需可回归, ,docs/UX_SPEC.md,单测未覆盖新字段,扩展现有单测覆盖 themeAccent/themeRadius/workspaceAccent/sidebarButtons 的保存与回读,tests/TestThemeSystem.cpp; tests/TestWorkspaceModel.cpp; tests/TestAppSettings.cpp,NEXT-V5-049,P2,M20,todo,ctest 覆盖新增用例且通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-055,Meta/Process,模块验收与归档(M20 Customization/Accessibility),完成后刷新 merged 与统计, ,docs/UX_SPEC.md,M20 任务尚未归档,完成 NEXT-V5-049..054 后把 Status 置为 done；运行合并脚本刷新 merged CSV,reference/developing/zen_browser_next_plan_v5.csv; scripts/merge_plans.ps1,NEXT-V5-049,P0,M20,todo,merged_developing 中不再包含 NEXT-V5-049..055 且 areas/counts 更新,修改 Status->done；运行 powershell -NoProfile -ExecutionPolicy Bypass -File scripts/merge_plans.ps1 -IncludeLayout；检查 reference/zen_browser_merged_developing.csv
NEXT-V5-056,DX,一键自检脚本：build+ctest（Debug）,Zen 工程化体验=一条命令可复现验证, ,docs/BUILDING.md,测试命令分散且新贡献者易漏跑,新增 scripts/check.ps1：cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure；失败返回非0；更新 docs/RUNNING.md,scripts/check.ps1 (new); docs/RUNNING.md, ,P2,M21,todo,运行 scripts/check.ps1 可完成 build+ctest 且失败会中止,powershell -NoProfile -ExecutionPolicy Bypass -File scripts/check.ps1
NEXT-V5-057,Stability,Profile 文件锁：避免多进程同时写同一数据目录,主流浏览器会避免 profile 被多实例破坏, ,docs/DESIGN.md,多窗口/多进程可能意外共享 profile 导致数据竞争,在 profile 目录创建 lockfile（QFile lock 或 OS mutex）；启动时检测并提示；incognito 绕过；提供最小单测,src/core/AppPaths.*; src/app/main.cpp; tests/TestAppSettings.cpp (or new), ,P2,M21,todo,同一 profile 启动第二个实例会提示并退出或切换到新 profile,启动 xbrowser --profile A 两次->第二次提示->不破坏数据；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-058,Packaging,Installer/分发：生成可运行目录并可选 MSIX/NSIS,Zen 可交付；XBrowser 需稳定产出可运行包, ,docs/BUILDING.md,package.ps1 已有但缺少 installer 路线与版本化输出,扩展 scripts/package.ps1：输出带版本号目录；新增 scripts/package_msix.ps1 或文档指南；确保 WebView2Loader 与 Qt plugins 齐全,scripts/package.ps1; scripts/package_msix.ps1 (new); docs/BUILDING.md,NEXT-V5-056,P3,M21,todo,dist 目录可在无 Qt 环境机器运行且文档说明清晰,运行 package 脚本->在干净环境运行 dist\\Release\\xbrowser.exe；检查可启动
NEXT-V5-059,Updates,更新提示：版本变化展示一次并可打开 Release Notes,Zen 更新后会提示用户并给出下一步, ,docs/UX_SPEC.md,版本提示缺少 release notes 跳转（若已实现则改为补齐）,版本变化时在 NotificationsStack 显示一次提示；按钮打开 docs/CHANGELOG 或 GitHub releases；支持关闭不再提示,src/core/DiagnosticsController.*; ui/qml/components/NotificationsStack.qml; ui/qml/BrowserWindow.qml, ,P3,M21,todo,升级版本号后首次启动出现提示且点击可打开 release notes,修改版本号->启动->出现提示->点击打开链接；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-060,Meta/Process,模块验收与归档(M21 Engineering/Delivery),工程化任务也要归档并刷新 merged, ,docs/UX_SPEC.md,M21 任务尚未归档,完成 NEXT-V5-056..059 后把 Status 置为 done；运行合并脚本刷新 merged CSV,reference/developing/zen_browser_next_plan_v5.csv; scripts/merge_plans.ps1,NEXT-V5-056,P0,M21,todo,merged_developing 中不再包含 NEXT-V5-056..060 且 counts 更新,修改 Status->done；运行 powershell -NoProfile -ExecutionPolicy Bypass -File scripts/merge_plans.ps1 -IncludeLayout；检查 reference/zen_browser_merged_all.csv
NEXT-V5-061,Omnibox,搜索建议：Web suggestions 开关与 provider 抽象,Zen/主流浏览器地址栏可选展示搜索建议且可关闭, ,docs/UX_SPEC.md,Omnibox 仅本地建议且无 web suggestions,OmniboxUtils 增加 WebSuggestionsProvider 接口；默认使用公开 open suggestions；Settings 增加开关；结果分组显示并限流,src/core/OmniboxUtils.*; ui/qml/BrowserWindow.qml; src/core/AppSettings.*; ui/qml/components/SettingsDialog.qml; tests/TestOmniboxUtils.cpp, ,P2,M22,todo,开启开关后输入关键词出现 Web Suggestions 分组且可 Enter 打开搜索,开启 web suggestions->地址栏输入关键字->出现建议->选择一条回车->导航到搜索结果；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-062,Omnibox,Omnibox 动作项：Open in Split/Open in New Workspace,Zen/Arc 类地址栏提供动作快捷入口减少鼠标路径, ,docs/UX_SPEC.md,Omnibox 建议缺少动作项,OmniboxUtils 增加 ActionSuggestion（split/openInWorkspace/copyUrl）；UI 支持渲染并执行；可配置显示,src/core/OmniboxUtils.*; ui/qml/BrowserWindow.qml,NEXT-V5-061,P2,M22,todo,下拉列表出现动作项且点击或回车可执行对应动作,输入关键字->选择 Action: Open in Split->回车->进入 split 并打开；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-063,Omnibox,Omnibox favicon：建议项显示网站图标并缓存,Zen 建议项带 icon 便于识别, ,docs/UX_SPEC.md,建议项无 favicon 或仅默认图标,增加 FaviconCache：获取并缓存 favicon；Omnibox 渲染 icon；失败回退默认图标,src/core/FaviconCache.* (new); src/core/OmniboxUtils.*; ui/qml/BrowserWindow.qml, ,P3,M22,todo,建议列表能显示常见站点 favicon 且二次打开命中缓存,输入访问过的站点域名->建议显示 favicon->重启后仍可快速显示；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-064,Omnibox,WebSuggestions 单测：解析/限流/排序,建议逻辑需可回归避免排序变化, ,docs/UX_SPEC.md,TestOmniboxUtils 未覆盖 web suggestions,为 provider 增加 mock；TestOmniboxUtils 覆盖：请求 debounce；返回解析；limit；与本地建议排序,tests/TestOmniboxUtils.cpp; src/core/OmniboxUtils.*,NEXT-V5-061,P2,M22,todo,ctest 覆盖新增用例且通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-065,Extensions,扩展工具栏溢出：pinned 超出时收纳到 overflow menu,Zen/Chromium pinned 扩展过多时有溢出菜单且不挤压地址栏, ,docs/UX_SPEC.md,pinned 扩展过多可能挤压布局或不可达,在 toolbar 增加 overflow 按钮；超过宽度的 pinned icons 放入菜单；支持点击打开 popup；保持顺序,ui/qml/BrowserWindow.qml; ui/qml/components/ExtensionsDialog.qml, ,P2,M22,todo,安装并固定多个扩展后出现 overflow 且所有扩展可点击打开,固定>=10个扩展->出现 overflow->点击菜单项打开对应 popup；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-066,Extensions,扩展 Site Access 展示：host permissions 可读且有基本提示,Zen/Chromium 详情页展示权限与站点访问范围, ,docs/UX_SPEC.md,扩展详情信息不完整,ExtensionsDialog 详情抽屉增加 permissions/host permissions 展示；对 <all_urls> 做醒目提示；支持复制,ui/qml/components/ExtensionsDialog.qml; src/core/ExtensionsStore.*; src/engine/webview2/BrowserExtensionsModel.*, ,P2,M22,todo,打开扩展详情可看到 host permissions 且 <all_urls> 有提示,安装一个有 host permissions 的扩展->打开详情->信息完整；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-067,Extensions,扩展快捷键：展示 commands 并与 ShortcutStore 冲突提示,Zen/Chromium 支持查看扩展 commands 并避免与系统快捷键冲突, ,docs/UX_SPEC.md,扩展快捷键不可见,获取 extension commands（若可用则接入）；在 ExtensionsDialog 展示列表；与 ShortcutStore 检测冲突并提示,src/core/ExtensionsStore.*; ui/qml/components/ExtensionsDialog.qml; src/core/ShortcutStore.*,NEXT-V5-066,P3,M22,todo,扩展详情页可看到快捷键并在冲突时提示,安装带 command 的扩展->打开详情->看到 shortcut；设置一个冲突快捷键->显示警告；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-068,Extensions,扩展相关单测：overflow 逻辑与权限展示,扩展管理 UI 回归风险高需覆盖关键逻辑, ,docs/UX_SPEC.md,缺少扩展新增逻辑的单测,追加 QtTest：ExtensionsStore 解析 host permissions；overflow 计算逻辑可单测（提取到 helper）；ctest 通过,tests/TestExtensionsStore.cpp; src/core/ExtensionsStore.*,NEXT-V5-066,P2,M22,todo,ctest 覆盖新增用例且通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-069,SplitView,链接右键：Open Link in Split View（新 pane）,Zen 分屏体验路径短：右键即可把链接打开到另一 pane, ,docs/UX_SPEC.md,WebView2 context menu 缺少 split 入口,WebView2View contextMenuRequested 提取 linkUrl；ContextMenu 增加 Open Link in Split；调用 SplitViewController 打开到空 pane 或新增 pane,src/engine/webview2/WebView2View.*; ui/qml/components/ContextMenu.qml; ui/qml/BrowserWindow.qml; src/core/SplitViewController.*, ,P1,M22,todo,右键链接选择 Open in Split 后分屏出现并打开该链接,打开网页->右键一个链接->Open in Split->分屏并打开；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-070,SplitView,分屏操作：Swap panes 与键盘快捷键,分屏需要快速交换左右避免拖拽成本, ,docs/UX_SPEC.md,SplitView 缺少 swap/快捷键,SplitViewController 增加 swapPanes；命令 split-swap（例如 Ctrl+Shift+S）；UI 增加按钮入口；持久化顺序,src/core/SplitViewController.*; ui/qml/BrowserWindow.qml; src/core/ShortcutStore.*; tests/TestSplitViewController.cpp, ,P2,M22,todo,Ctrl+Shift+S 可交换两个 pane 的网页并保持焦点,开启 2-pane 分屏->两侧打开不同网址->按 Ctrl+Shift+S->两侧互换；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-071,SplitView,分屏关闭与聚焦：Close pane/Focus next pane,分屏应可键盘关闭与切换焦点, ,docs/UX_SPEC.md,分屏 pane 关闭与焦点切换路径长,命令 split-close-pane / split-focus-next；支持关闭当前 pane 但保留至少1 pane；更新 UI 状态与 session,src/core/SplitViewController.*; ui/qml/BrowserWindow.qml; src/core/ShortcutStore.*; src/core/SessionStore.*, ,P2,M22,todo,可用快捷键关闭当前 pane 且焦点移动到剩余 pane,开启3-pane->关闭当前 pane->paneCount 减1 且焦点切换；重启后保持；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-072,SplitView,SplitView 单测：open link/swap/close,分屏状态机需要回归测试, ,docs/UX_SPEC.md,单测未覆盖 swap/close/open link,扩展 TestSplitViewController 覆盖 swapPanes/closePane/focusNext；SessionStore 持久化顺序,tests/TestSplitViewController.cpp; tests/TestSessionStore.cpp; src/core/SplitViewController.*; src/core/SessionStore.*,NEXT-V5-070,P2,M22,todo,ctest 覆盖新增用例且通过,cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
NEXT-V5-073,Meta/Process,模块验收与归档(M22 Omnibox/Extensions/SplitView),模块完成后刷新 merged 与统计, ,docs/UX_SPEC.md,M22 任务尚未归档,完成 NEXT-V5-061..072 后把 Status 置为 done；运行合并脚本刷新 merged CSV,reference/developing/zen_browser_next_plan_v5.csv; scripts/merge_plans.ps1,NEXT-V5-061,P0,M22,todo,merged_developing 中不再包含 NEXT-V5-061..073 且 counts 更新,修改 Status->done；运行 powershell -NoProfile -ExecutionPolicy Bypass -File scripts/merge_plans.ps1 -IncludeLayout；检查 reference/zen_browser_merged_counts_by_area.csv
NEXT-V5-074,Core/UI,启动失败：MenuBar 类型冲突导致 visible 不存在,启动应稳定且 UI 不应因 import 冲突崩溃, ,docs/UX_SPEC.md,Qt.labs.platform 导致 MenuBar 解析为平台类型且无 visible 属性,为 Qt.labs.platform 设置 alias 仅用于 FileDialog；确保 MenuBar/Menu/MenuItem 使用 QtQuick.Controls,ui/qml/BrowserWindow.qml, ,P0,M15,done,启动不再报 Main.qml/BrowserWindow.qml 错误且菜单栏可按设置显示/隐藏,启动应用->进入主界面；Settings->Show menu bar 开关可隐藏/显示菜单栏；cmake --build build --config Debug；cd build；ctest -C Debug --output-on-failure
