ID,Category,Feature,Zen_UI,Zen_Source,Zen_Prefs,Zen_State,Zen_Notes,XBrowser_Task,XBrowser_Suggested_Files,XBrowser_DependsOn,Priority,Done_Criteria
META-001,Meta,Snapshot,"基于 zen-browser/desktop 分支 dev 的 src/zen 及 browser/base/content 的 zen 相关文件","ZenRepo=https://github.com/zen-browser/desktop; ZenRef=dev; ZenCommit=bc24c2b11defdead246d2f76d51973aef984a440; License=MPL-2.0; Local=reference/zen-browser-src/desktop-dev","",,"不 clone 仓库，使用 GitHub raw/API 拉取所需源码子集","作为后续复刻 Zen 交互与布局的对照基线","reference/zen_browser_feature_layout.csv",,META,CSV 中每行均可追溯到 Zen 源码路径
ZEN-001,Build/Packaging,纳入 Zen 源码目录,"构建系统把 src/zen 编进 Firefox/Zen 构建","src/browser/base/moz-build.patch; src/zen/moz.build","",,"通过 moz.build 把 zen 目录加入 DIRS，后续 jar/组件/actors 才会生效","(可选)仅记录，不需要在 XBrowser 实现","",,P3,"确认 Zen 是通过 moz.build 集成而非仅 runtime 注入"
ZEN-002,Build/Packaging,打包 Zen 资源到 browser.jar,"把 zen-styles/zen-components 等映射到 chrome://browser/...","src/browser/base/jar-mn.patch; src/browser/base/content/zen-assets.jar.inc.mn; src/zen/**/jar.inc.mn","",,"zen-assets.jar.inc.mn 聚合各子模块 jar.inc.mn，产出 chrome://browser/content/zen-* 路径","(可选)仅记录：XBrowser 不需要 jar，但需要等价的资源加载策略","",,P3,"列清 Zen 的资源入口与加载点即可"
ZEN-003,Build/Startup,组件与 WindowActor 注册,"app-startup 与 browser-before-ui-startup 阶段挂载","src/zen/ZenComponents.manifest; src/zen/common/Components.manifest; src/zen/common/sys/ZenActorsManager.sys.mjs; src/zen/sessionstore/SessionComponents.manifest","zen.injections.match-urls; zen.glance.enabled","XPCOM categories; JSWindowActors","ZenActorsManager 注册 ZenGlance / ZenModsMarketplace actors，负责内容页注入与事件桥接","(可选)XBrowser 若需要 content 注入/拦截，需设计 WebView2 的消息/脚本注入机制","src/engine/webview2/WebView2View.*",,P2,"能在内容页范围内注入脚本并与宿主双向通信"
ZEN-010,Window/Layout,主容器包装,"browser.xhtml 增加 <hbox id=zen-main-app-wrapper> 包住 toolbox + browser-box","src/browser/base/content/browser-xhtml.patch","",,"zen-main-app-wrapper 是后续动画/主题/全局 overlay 的挂载点","在 XBrowser 里定义等价的根布局容器（QML 根 Item），支持全局 overlay/动画层","ui/qml/BrowserWindow.qml",,MVP,"存在可覆盖全窗口的 overlay 层与根容器引用"
ZEN-011,Window/Layout,AppContent 与 Navbar 容器,"browser-box.inc.xhtml 增加 zen-appcontent-wrapper / zen-appcontent-navbar-wrapper / zen-tabbox-wrapper","src/browser/base/content/browser-box-inc-xhtml.patch","",,"为单工具栏模式/侧边栏 URLBar 提供承载容器；tabbox 周边可插入 split/side panels","在 XBrowser 中拆分：侧边栏区 + 顶部/侧边地址栏区 + 内容区容器","ui/qml/BrowserWindow.qml; ui/qml/components/*",ZEN-010,MVP,"布局可独立显示/隐藏地址栏区域且不影响内容区渲染"
ZEN-012,Window/Layout,Tabstrip 注入 Essentials 与 Wrapper,"TabsToolbar/tabstrip 增加 #zen-essentials 与 #zen-tabs-wrapper","src/browser/base/content/navigator-toolbox-inc-xhtml.patch","zen.tabs.essentials.max","DOM attributes on tabs","Essentials 是 pinned/essential 的独立区域；zen-tabs-wrapper 参与点击/拖拽与新标签逻辑","在 XBrowser 侧边栏中增加 Essentials 区域（固定/常用标签）并与普通标签列表分区","src/core/TabModel.*; ui/qml/BrowserWindow.qml",ZEN-010,MVP,"侧边栏有可配置的固定区与普通区，支持基本增删/激活"
ZEN-013,Sidebar,底部按钮条,"#zen-sidebar-foot-buttons: 展开/Workspaces/创建菜单 + media controls include","src/browser/base/content/zen-sidebar-icons.inc.xhtml; src/zen/media/zen-media-controls.inc.xhtml","",,"底部区承载工作区切换器与创建入口；媒体控件插入其上方","在 XBrowser 侧边栏底部加入固定按钮区：工作区切换、New、侧边栏展开/收起","ui/qml/BrowserWindow.qml; ui/qml/components/SidebarFooter.qml",ZEN-011,MVP,"底部按钮区固定可用，支持新增标签/切换工作区/收起侧栏"
ZEN-014,Sidebar/CustomizableUI,顶部按钮条与 splitter,"运行时创建 #zen-sidebar-top-buttons 与 #zen-sidebar-splitter，注册 CustomizableUI 区域","src/zen/common/sys/ZenCustomizableUI.sys.mjs","zen.view.sidebar-expanded; zen.view.sidebar-expanded.max-width; zen.tabs.vertical.right-side","XULStore width; prefs","ZenCustomizableUI 负责：插入 splitter、设置/持久化 sidebar 宽度、移动窗口按钮(部分平台)","在 XBrowser：实现侧边栏可拖拽宽度（splitter），并持久化到设置","ui/qml/BrowserWindow.qml; src/core/*Settings* (待建)",ZEN-011,MVP,"侧边栏宽度可拖拽调整，重启后保持"
ZEN-015,Window/Layout,Tabbox 附加元素(Toast/Overlays),"tabbrowser-tabbox 内 include zen-tabbrowser-elements：toast 容器 + split/glance overlay","src/browser/base/content/zen-tabbrowser-elements.inc.xhtml; src/zen/split-view/zen-splitview-overlay.inc.xhtml; src/zen/glance/zen-glance.inc.xhtml","",,"集中放置全局 overlay 与 toast，避免侵入主布局","在 XBrowser：实现 Toast 容器与 Overlay host（Split/Glance 等未来功能共用）","ui/qml/components/OverlayHost.qml; ui/qml/components/ToastHost.qml",ZEN-010,MVP,"可从任意逻辑触发 toast；overlay 可覆盖内容区并响应点击关闭"
ZEN-016,Window/Layout,Zen PopupSet 与 Panels,"main-popupset include zen-popupset，内含 gradient/emoji/folder-search/site-data 等 panel/popup","src/browser/base/content/main-popupset-inc-xhtml.patch; src/browser/base/content/zen-popupset.inc.xhtml; src/browser/base/content/zen-panels/*.inc","",,"Zen 用 menupopup/panel 承载创建菜单、工作区菜单、站点面板等","在 XBrowser：用 QML Popup/Drawer/Sheet 体系替代，并统一管理打开/关闭与定位","ui/qml/components/Popups/* (待建)",ZEN-010,P1,"至少有一个统一 Popup 管理器，可按锚点弹出"
ZEN-017,Input/Commands,命令与 Keyset 桥接,"zenCommandSet + zenKeyset；MozBeforeInitialXULLayout 绑定 command handler","src/browser/base/content/zen-commands.inc.xhtml; src/browser/base/content/zen-keysets.inc.xhtml; src/zen/common/zen-sets.js; src/browser/base/content/browser-sets-inc.patch","zen.keyboard.shortcuts.version; zen.keyboard.shortcuts.disable-mainkeyset-clear","prefs + command events","Zen 用 command id 统一分发到各 feature（compact/workspace/split/glance/复制 URL 等）","在 XBrowser：建立 CommandBus（enum/strings）+ Shortcut 映射层，统一触发业务动作","src/core/*Command* (待建); ui/qml/components/Shortcuts.qml",ZEN-010,MVP,"快捷键与按钮都走同一套命令入口，便于复刻 Zen 行为"
ZEN-020,Startup,预加载模块(更早于 global-scripts),"在 <head> 先加载 zen-sets.js 与部分 module(HasPolyfill/Workspaces)","src/browser/base/content/zen-preloaded.inc.xhtml; src/zen/common/zen-sets.js; src/zen/common/modules/ZenHasPolyfill.mjs; src/zen/workspaces/*.mjs","",,"确保 keyset/Workspaces 早期可用；为后续 UI 初始化铺路","在 XBrowser：应用启动期先初始化 Workspaces/Settings，再构建 UI","src/app/main.cpp; src/core/*Workspace* (待建)",,MVP,"启动顺序明确：Settings/Workspace -> UI -> WebView2"
ZEN-021,Startup,加载 CSS 与 Feature Modules,"zen-assets.inc.xhtml 链接全量 zen-styles 并加载 ZenPreloadedScripts + 主要 feature module","src/browser/base/content/zen-assets.inc.xhtml; src/zen/common/ZenPreloadedScripts.js","",,"CSS 是布局的核心；ZenPreloadedScripts 注入 gZen* 全局对象","在 XBrowser：拆分 QML 样式/主题变量与组件模块加载，保证主窗口只依赖少量入口文件","ui/qml/BrowserWindow.qml; ui/qml/components/*",ZEN-020,MVP,"主窗口入口清晰，主题与功能模块可按需加载/开关"
ZEN-030,Core,全局预加载脚本注入,"ZenPreloadedScripts.js 通过 loadSubScript/importESModule 把 gZen* 注入 window","src/zen/common/ZenPreloadedScripts.js; src/zen/zen.globals.mjs","",,"把 UIManager/CompactMode/Mods/KBS/SessionStore/DragAndDrop 等挂到 window，全局可调用","在 XBrowser：用单例 Controller/Service 注入 QML context（如 BrowserController + WorkspaceController）","src/core/BrowserController.*; (建议新增) src/core/WorkspaceController.*",ZEN-021,MVP,"QML 层可访问统一的 controller/service，对应 Zen 的 gZen*"
ZEN-031,Core/UI,UI 总控与垂直标签管理器,"gZenUIManager + gZenVerticalTabsManager：popup 跟踪、context menu 精简、omnibox init、toolbar 更新、动画","src/zen/common/modules/ZenUIManager.mjs","zen.tabs.vertical; zen.tabs.vertical.right-side; zen.view.use-single-toolbar; zen.view.sidebar-expanded; zen.view.sidebar-height-throttle","DOM + prefs","Zen 把“垂直侧边栏 + 单工具栏 + 动画/交互”集中在 UIManager","在 XBrowser：拆分 SidebarController + LayoutController，避免单文件过大但保留统一入口","(建议新增) src/core/LayoutController.*; ui/qml/components/Sidebar.qml",ZEN-011,MVP,"侧边栏与地址栏布局状态切换可控，且逻辑不散落在多个无关组件"
ZEN-032,Core/UI,Toast 系统,"#zen-toast-container + gZenUIManager.showToast(...)","src/browser/base/content/zen-tabbrowser-elements.inc.xhtml; src/zen/common/modules/ZenUIManager.mjs","",,"用于提示：复制 URL、工作区重排提示、Pinned 操作反馈等","在 XBrowser：实现 ToastHost + API（showToast(text,action,timeout)）","ui/qml/components/ToastHost.qml; (建议新增) src/core/ToastController.*",ZEN-015,P1,"toast 支持可选按钮动作与超时消失"
ZEN-033,Notifications,侧边栏通知组件,"<zen-sidebar-notification> 使用 lit/motion 动画，插入在 media controls 后","src/zen/common/modules/ZenSidebarNotification.mjs","",,"用于更新提示等；仅在 sidebar expanded 时显示","在 XBrowser：实现 SidebarNotification 组件（可插入队列）","ui/qml/components/SidebarNotification.qml",ZEN-013,P2,"侧边栏可堆叠通知并带关闭按钮/链接动作"
ZEN-034,Updates,版本更新提示与窗口动画,"检查版本变化并创建更新提示；首次 buildID 变化时在 zen-main-app-wrapper 播放动画","src/zen/common/modules/ZenUpdates.mjs","zen.updates.last-version; zen.updates.last-build-id; zen.updates.show-update-notification","prefs","更新提示通过 SidebarNotification；动画依赖 motion 与 reduce motion","在 XBrowser：可选实现更新提示（未来自动更新/版本公告用）","docs/ (可选); ui/qml/components/SidebarNotification.qml",ZEN-033,P3,"可记录上次版本并在变更时提示一次"
ZEN-040,Tabs,垂直标签样式栈,"zen-tabs.css + vertical-tabs.css 负责侧边栏 tabstrip 布局与细节","src/zen/tabs/zen-tabs.css; src/zen/tabs/zen-tabs/vertical-tabs.css; src/zen/common/styles/zen-sidebar.css","zen.tabs.vertical; zen.tabs.show-newtab-vertical","CSS + prefs","大量 :root 属性驱动布局；与 splitter/expanded 状态联动","在 XBrowser：定义 Sidebar Tabs 视觉规范（间距/圆角/hover/选中/滚动）并组件化","ui/qml/components/TabList.qml; ui/qml/components/TabItem.qml",ZEN-031,MVP,"tab 列表支持选中/hover/滚动/右键菜单入口"
ZEN-041,Tabs,Essentials(固定/常用标签)区,"#zen-essentials 容器；tab 上用 zen-essential 属性；DnD/动画/上限控制","src/browser/base/content/navigator-toolbox-inc-xhtml.patch; src/zen/tabs/ZenPinnedTabManager.mjs; src/zen/drag-and-drop/ZenDragAndDrop.js","zen.tabs.essentials.max","tab attributes + session restore","Essentials 与普通 pinned 区分；支持图标固定与交互","在 XBrowser：增加 Pinned/Essentials 数据结构（可选：两级固定）并渲染为网格或列表","src/core/TabModel.*; ui/qml/components/EssentialsGrid.qml (待建)",ZEN-012,P1,"可把标签标记为 essentials，并在侧边栏独立显示"
ZEN-042,Tabs,固定标签管理器,"处理 pinned/essential：重置/替换 pinned URL、关闭行为(切换/卸载)、滚轮中键关闭等","src/zen/tabs/ZenPinnedTabManager.mjs","zen.pinned-tab-manager.*; zen.tabs.essentials.max","SessionStore tab state; tab attrs","包含对 split-view group 的特殊处理；对 tab icon/title 变化派发自定义事件","在 XBrowser：实现 pinned tab 的“关闭键行为策略”与“重置到初始 URL(可选)”","src/core/TabModel.*; src/core/BrowserController.*",ZEN-041,P2,"Pinned tab 的关闭策略可配置，且不影响普通 tab"
ZEN-043,Tabs,标签重命名,"双击 tab 启动重命名；toast 提示；可选启用","src/zen/common/modules/ZenUIManager.mjs","zen.tabs.rename-tabs","tab property persisted via session","zenStaticLabel/zenHasStaticIcon 等会进入 session restore","在 XBrowser：TabItem 支持 inline rename，并持久化到会话/工作区","src/core/TabModel.*; ui/qml/components/TabItem.qml",ZEN-040,P2,"双击可编辑标题并保存，刷新/切换标签不丢失"
ZEN-044,Tabs,无历史返回自动关标签,"shouldCloseTabOnBack：有 owner 且非 pinned 且非 empty-tab 时后退关闭","src/zen/common/modules/ZenCommonUtils.mjs","zen.tabs.close-on-back-with-no-history","runtime decision","偏 UX 规则：避免“新开一页然后空后退”留残 tab","在 XBrowser：可选实现类似规则（需 WebView2 历史判断）","src/engine/webview2/WebView2View.*; src/core/BrowserController.*",,P3,"当后退无历史且符合条件时自动关闭当前 tab"
ZEN-050,Workspaces,工作区总控,"管理空间列表/切换/拖拽/滚动切换/手势；与 pinned/SessionStore 协作","src/zen/workspaces/ZenWorkspaces.mjs","zen.workspaces.*; zen.swipe.is-fast-swipe; zen.tabs.close-window-with-empty","prefs + SessionStore + custom elements","支持 wrap-around、natural scroll、container 绑定、关闭最后 unpinned 自动开新 tab 等","在 XBrowser：新增 WorkspaceModel + WorkspaceController；将 TabModel 按 workspace 分桶","(建议新增) src/core/WorkspaceModel.*; src/core/WorkspaceController.*",ZEN-017,MVP,"可创建多个工作区，切换时 tab 列表与活动 tab 隔离"
ZEN-051,Workspaces,自定义元素与 UI,"<zen-workspace> / <zen-workspace-icons> / <zen-workspace-creation> 自定义元素","src/zen/workspaces/ZenWorkspace.mjs; src/zen/workspaces/ZenWorkspaceIcons.mjs; src/zen/workspaces/ZenWorkspaceCreation.mjs","zen.playHapticFeedback; zen.view.show-newtab-button-top","DOM + prefs","Zen 用 customElements 组合 UI；WorkspaceIcons 是侧边栏切换器","在 XBrowser：以 QML 组件实现 WorkspaceSwitcher + WorkspaceView + WorkspaceCreationDialog","ui/qml/components/WorkspaceSwitcher.qml; ui/qml/components/WorkspaceCreationDialog.qml",ZEN-050,MVP,"有工作区切换器；可创建/重命名/删除工作区"
ZEN-052,Workspaces/Theme,工作区主题与渐变生成,"nsZenThemePicker + ZenGradientGenerator；支持纹理/旋转/透明度/系统色等","src/zen/workspaces/ZenGradientGenerator.mjs; src/zen/workspaces/zen-gradient-generator.css; src/browser/base/content/zen-panels/gradient-generator.inc","zen.theme.*; zen.widget.linux.transparency","prefs + style vars","工作区可有独立 theme 配置并影响 --zen-primary-color 等","在 XBrowser：设计主题系统（全局+工作区覆盖），先实现 accent color + background gradient","ui/qml/components/Theme/* (待建)",ZEN-050,P2,"切换工作区时主题联动更新（至少颜色/背景）"
ZEN-053,Workspaces,工作区书签/快速入口存储,"ZenWorkspaceBookmarksStorage.js 通过 loadSubScript 注入；用于 workspace 级书签/入口","src/zen/workspaces/ZenWorkspaceBookmarksStorage.js; src/zen/common/ZenPreloadedScripts.js","",,"Zen 选择用单独脚本注入而非 module（历史原因/兼容）","在 XBrowser：新增本地存储（JSON/SQLite）保存 workspace 的快捷入口","(建议新增) src/core/Storage/*; docs/DESIGN.md",ZEN-050,P3,"能持久化 workspace 的快捷入口列表并在 UI 显示"
ZEN-060,Folders,Tab Folder/Group 管理,"ZenFolders 监听 TabGrouped/TabGroup* 事件，提供新建/子文件夹/卸载/转空间等","src/zen/folders/ZenFolders.mjs; src/zen/folders/ZenFolder.mjs; src/zen/folders/zen-folders.css; src/browser/base/content/zen-panels/popups.inc","zen.folders.*; zen.tabs.folder-dragover-threshold-percent","tab group state + session","Zen 将 folder 和 Firefox Tab Group 结合，并提供 UI popup+搜索","在 XBrowser：实现 TabGroup/Folder 模型（嵌套层级可先做 1 层）+ 折叠/展开","(建议新增) src/core/TabGroupModel.*; ui/qml/components/TabGroupItem.qml",ZEN-050,P2,"可把若干 tab 归为组并折叠/展开"
ZEN-061,Folders,Folder Tabs Popup 与搜索,"#zen-folder-tabs-popup + search input，hover 延迟与过滤","src/zen/folders/zen-folders.css; src/zen/folders/ZenFolders.mjs; src/browser/base/content/zen-panels/folders-search.inc","zen.folders.search.*","runtime UI state","提供快速预览与搜索当前 folder 内 tabs","在 XBrowser：实现组内搜索弹窗（或在组内内联搜索）","ui/qml/components/FolderTabsPopup.qml (待建)",ZEN-060,P3,"对组内 tabs 进行即时过滤搜索"
ZEN-070,SplitView,分屏/网格分割,"ZenViewSplitter 维护 split node tree，支持 grid/vsep/hsep/unsplit + tab drop","src/zen/split-view/ZenViewSplitter.mjs","zen.splitView.*","tab group + overlay state","最多 4 个视图；支持拖拽进入分屏与 context menu 操作","在 XBrowser：实现 SplitView 容器（2-4 panes）+ 每 pane 绑定 tab/webview","ui/qml/components/SplitView.qml (待建); src/core/TabModel.*",ZEN-011,P1,"能把当前视图分成 2 个 pane 并分别打开不同 tab"
ZEN-071,SplitView,Overlay 与 Dropzone,"zen-splitview-overlay.inc.xhtml 定义 overlay/dropzone；zen-decks.css 控制交互区域","src/zen/split-view/zen-splitview-overlay.inc.xhtml; src/zen/split-view/zen-decks.css; src/browser/base/content/zen-tabbrowser-elements.inc.xhtml","zen.splitView.enable-tab-drop","overlay state","用于拖拽 tab 到内容区边缘进行分屏/重排提示","在 XBrowser：实现内容区 Dropzone（拖拽高亮边缘）并触发 split/rearrange","ui/qml/components/SplitDropzone.qml (待建)",ZEN-070,P2,"拖拽 tab 到内容区边缘时显示可放置区域并完成分屏"
ZEN-080,Glance,快速预览(Glance)总控,"创建 glance tab 并挂到 parent tab，overlay 点击关闭；支持 fully open / split","src/zen/glance/ZenGlanceManager.mjs; src/zen/glance/zen-glance.inc.xhtml; src/zen/glance/zen-glance.css","zen.glance.*","glances map + tab attrs","类似“临时预览”层，避免打断当前工作流","在 XBrowser：可选实现 Preview Overlay（在同一 tab 内临时打开链接）","ui/qml/components/PreviewOverlay.qml (待建)",ZEN-070,P3,"可从链接触发预览并一键转为新 tab/分屏"
ZEN-081,Glance,内容页 Actor 注入,"ZenGlance JSWindowActor 在 allFrames/matches=*://*/* 下接收事件并与 parent 通信","src/zen/common/sys/ZenActorsManager.sys.mjs; src/zen/glance/actors/ZenGlanceChild.sys.mjs; src/zen/glance/actors/ZenGlanceParent.sys.mjs","zen.glance.enabled; zen.injections.match-urls","JSWindowActors","负责捕捉点击/快捷键/上下文菜单等触发 glance 的条件","在 XBrowser：若做 Glance，需要 WebView2 注入脚本捕捉点击并回传 URL","src/engine/webview2/WebView2View.*",ZEN-080,P3,"能在页面内捕捉链接点击并按规则触发预览"
ZEN-090,Urlbar,Zen Omnibox Provider(快速动作),"注册 UrlbarProvider：workspace actions/extension actions/global actions + learner","src/zen/urlbar/ZenUBProvider.sys.mjs; src/zen/urlbar/ZenUBActionsProvider.sys.mjs; src/zen/urlbar/ZenUBGlobalActions.sys.mjs; src/zen/urlbar/ZenUBResultsLearner.sys.mjs","zen.urlbar.suggestions.quick-actions; zen.urlbar.suggestions-learner","prefs + learned results","把工作区切换、扩展动作等注入到地址栏建议","在 XBrowser：规划 Omnibox 架构（建议源：历史/书签/动作/工作区），先实现动作建议","ui/qml/components/Omnibox.qml (待建); src/core/Suggestions* (待建)",ZEN-017,P2,"地址栏输入可出现“动作”建议并可执行"
ZEN-091,SiteDataPanel,站点数据/扩展统一面板,"替换 unified-extensions-panel：在 identity-icon-box 前插入 #zen-site-data-icon-button 并复用 gUnifiedExtensions","src/zen/urlbar/ZenSiteDataPanel.sys.mjs; src/browser/base/content/zen-panels/site-data.inc; src/browser/base/content/navigator-toolbox-js.patch","zen.site-data-panel.show-callout; zen.theme.hide-unified-extensions-button","panel DOM state","把权限/安全/扩展列表/分享/复制 URL 集成到一个面板入口","在 XBrowser：可选实现 Site Panel（权限/下载/扩展入口/复制 URL）作为侧栏或弹层","ui/qml/components/SitePanel.qml (待建)",ZEN-016,P3,"存在可打开的站点面板并至少包含复制 URL/权限入口"
ZEN-092,Urlbar,复制 URL 按钮与 Share,"在 page-action-buttons 附近插入 #zen-copy-url-button，触发 cmd_zenCopyCurrentURL；可走原生 share","src/zen/urlbar/ZenSiteDataPanel.sys.mjs; src/zen/common/modules/ZenCommonUtils.mjs","zen.canShare; zen.share","OS share service","复制 URL toast 提示；若可 share 则提供按钮","在 XBrowser：实现复制 URL（剪贴板）+ 可选 Windows ShareSheet","src/core/BrowserController.*; src/core/Clipboard* (待建)",ZEN-032,P2,"复制 URL 有反馈；可选提供系统分享入口"
ZEN-100,Mods,Zen Mods 管理(CSS Mods),"管理下载/更新/应用 mods；合成 profile/chrome/zen-themes.css 并注入样式","src/zen/mods/ZenMods.mjs","zen.themes.disable-all; zen.mods.*","profile file + prefs","把 mod 偏好同步到 DOM 属性/变量；可批量禁用","在 XBrowser：可选实现“主题/皮肤包”系统（先做本地主题，后做在线）","ui/qml/components/Theme/*; src/core/ThemeManager.*",ZEN-052,P3,"可切换多套主题并持久化"
ZEN-101,Mods,Mods Backend XPCOM,"@mozilla.org/zen/mods-backend;1 提供 rebuildModsStyles 等服务","src/zen/mods/components.conf; src/zen/mods/nsIZenModsBackend.idl; src/zen/mods/nsZenModsBackend.*; src/zen/mods/ZenStyleSheetCache.*","",,"底层负责样式注入与缓存","在 XBrowser：不需要 XPCOM，但需要等价的样式/主题应用层","",ZEN-100,P3,"主题应用不依赖 UI 线程阻塞且可缓存"
ZEN-102,Mods,Marketplace WindowActor,"ZenModsMarketplace actor 只在 match-urls + about:preferences 生效，负责安装/卸载/更新查询","src/zen/common/sys/ZenActorsManager.sys.mjs; src/zen/mods/actors/ZenModsMarketplaceChild.sys.mjs; src/zen/mods/actors/ZenModsMarketplaceParent.sys.mjs","zen.injections.match-urls","JSWindowActors + async messages","通过 actor 在页面里触发安装动作并回传状态","在 XBrowser：如做在线主题商店，需 UI<->网络<->本地存储的工作流设计","",ZEN-100,P3,"能完成安装/卸载/更新检查的闭环（可后置）"
ZEN-110,Downloads,下载动画组件,"<zen-download-animation> 自定义元素 + arc/box 动画 CSS","src/zen/downloads/ZenDownloadAnimation.mjs; src/zen/downloads/zen-download-arc-animation.css; src/zen/downloads/zen-download-box-animation.css","zen.downloads.*","DOM element state","主要是 UI 动效与下载状态联动","在 XBrowser：可选实现下载进度动效（先做下载列表，再做动效）","ui/qml/components/Downloads/* (待建)",,P3,"下载开始/完成/失败有可见反馈"
ZEN-120,Media,侧边栏媒体控制,"#zen-media-controls-toolbar + 控制按钮/进度条；仅在有媒体时显示","src/zen/media/ZenMediaController.mjs; src/zen/media/zen-media-controls.inc.xhtml; src/zen/media/zen-media-controls.css","zen.mediacontrols.enabled","MediaSession state","聚合播放/暂停/切歌/静音/画中画等","在 XBrowser：可选实现媒体控制（依赖 WebView2/MediaSession API 能力）","ui/qml/components/MediaControls.qml (待建)",,P3,"播放媒体时出现控制条并可控制"
ZEN-130,Emoji,Emoji Picker 面板,"ZenEmojiPicker + ZenEmojisData；popupset include emojis-picker.inc","src/zen/common/emojis/ZenEmojiPicker.mjs; src/zen/common/emojis/ZenEmojisData.min.mjs; src/browser/base/content/zen-panels/emojis-picker.inc","",,"用于输入/快捷插入 emoji","在 XBrowser：可选实现 emoji 选择器（系统面板或内置）","ui/qml/components/EmojiPicker.qml (待建)",,P4,"可从 UI 打开 emoji 选择并插入到输入框"
ZEN-140,CompactMode,紧凑模式(隐藏/悬停显示),"控制 sidebar/toolbar 在 hover 或 popup 时显示；用 ZenHasPolyfill 观察 selector 设置 zen-compact-mode-active","src/zen/compact-mode/ZenCompactMode.mjs; src/zen/common/modules/ZenHasPolyfill.mjs; src/zen/common/styles/zen-compact-mode.css; src/zen/compact-mode/sidebar.inc.css","zen.view.compact.*","prefs + DOM attrs","支持 flashSidebar、illegal state 检查、context menu 配置","在 XBrowser：实现 CompactMode：自动隐藏地址栏/侧栏并悬停显示（可先做手动切换）","ui/qml/BrowserWindow.qml; (建议新增) src/core/LayoutController.*",ZEN-031,P2,"可切换紧凑模式且基本可用，不影响导航/输入"
ZEN-150,DnD,Tab/Workspace 拖拽行为,"ZenDragAndDrop 继承 TabDragAndDrop：多选拖拽、essentials grid、拖到边缘切 space 等","src/zen/drag-and-drop/ZenDragAndDrop.js","zen.tabs.dnd-switch-space-delay; zen.workspaces.dnd-switch-padding","DnD state + timers","拖拽过程中会动态改变 drop indicator 与目标 workspace","在 XBrowser：实现 tab 拖拽重排、拖拽到工作区切换/移动（先做重排）","ui/qml/components/TabList.qml; src/core/TabModel.*",ZEN-050,P2,"支持拖拽重排 tab，且不破坏激活状态"
ZEN-151,DnD,拖拽原生服务,"@mozilla.org/zen/drag-and-drop;1 + nsIZenDragAndDrop（用于 OS 集成或统计）","src/zen/drag-and-drop/nsIZenDragAndDrop.idl; src/zen/drag-and-drop/nsZenDragAndDrop.*; src/zen/drag-and-drop/components.conf","",,"用于在 drag start 等阶段回调，可能与平台特性相关","在 XBrowser：通常不需要；如需全局拖拽统计/原生集成可另做","",ZEN-150,P4,"明确哪些拖拽能力由 QML 自带，哪些需要原生层补足"
ZEN-160,Session,Tab Zen 元数据恢复,"restoreInitialTabData：把 workspaceId/syncId/staticLabel/essential 等恢复到 tab attributes","src/zen/common/modules/ZenSessionStore.mjs","zen.session-store.*","SessionStore tabData","为 window sync/工作区/固定标签提供启动恢复","在 XBrowser：实现会话持久化（tab 列表+active+workspace）并在启动恢复","(建议新增) src/core/SessionStore.*; src/core/WorkspaceModel.*",ZEN-050,P1,"重启后恢复 tab 列表与当前工作区/当前 tab"
ZEN-161,WindowSync,多窗口同步,"ZenWindowSync 监听 TabOpen/Close/Move/Pinned/Group/Split/Focus 等并在窗口间同步","src/zen/sessionstore/ZenWindowSync.sys.mjs","zen.window-sync.enabled; zen.window-sync.log","multi-window runtime state","支持 synced/unsynced window；为每 tab 生成 sync id","在 XBrowser：先实现单窗口；后续若要多窗口共享工作区，再设计同步层","",ZEN-160,P3,"（可选）多窗口共享同一组工作区与 tab 元数据"
ZEN-162,Session,侧边栏状态文件(zen-sessions),"ZenSessionManager 写 zen-sessions.json(lz4) + backups；保存 tabs/groups/folders/split/spaces","src/zen/sessionstore/ZenSessionManager.sys.mjs","zen.session-store.*","profile file + backups","支持从 Places DB 迁移；可只恢复 pinned；可选择恢复 unsynced windows","在 XBrowser：定义 session JSON/SQLite schema，覆盖 workspace/tab/group/split 状态","docs/DESIGN.md; (建议新增) src/core/Storage/*",ZEN-160,P1,"有稳定的数据结构与版本迁移策略（至少预留 version 字段）"
ZEN-180,Theme,主题变量注入(Accent/Radius/Separation),"ZenThemeModifier 监听 pref 与事件，写 CSS vars (--zen-primary-color 等) 并处理 fullscreen/compact/split 特例","src/zen/common/zenThemeModifier.js","zen.theme.accent-color; zen.theme.border-radius; zen.theme.content-element-separation; zen.view.borderless-fullscreen","prefs + CSS vars","解决 shadow root 不继承的问题；全局统一入口","在 XBrowser：用 QML 单例 Theme（properties）驱动全局样式，避免散落硬编码","ui/qml/components/Theme.qml (待建)",ZEN-052,P2,"切换主题/工作区时，UI 颜色/圆角/间距同步更新"
ZEN-181,Theme,全局样式装载点,"zen-assets.inc.xhtml 的 linkset 装载 zen-theme/toolbar/sidebar/tabs/workspaces/... 作为布局骨架","src/browser/base/content/zen-assets.inc.xhtml; src/zen/common/styles/*.css","zen.theme.*; zen.view.*; zen.urlbar.*","prefs + CSS","Zen 的布局高度依赖 CSS 属性与 :root attribute","在 XBrowser：把布局规则放到 QML 组件与 theme vars，而不是散落在 JS","ui/qml/components/*",ZEN-180,MVP,"样式可通过少量 theme vars 调整而不需要全局搜索替换"
ZEN-190,Welcome,首次启动欢迎页,"ZenWelcome + zen-welcome.css；pref zen.welcome-screen.seen 控制是否展示","src/zen/welcome/ZenWelcome.mjs; src/zen/welcome/zen-welcome.css","zen.welcome-screen.seen","prefs","包含动画与引导步骤","在 XBrowser：可选实现 onboarding（首次启动引导/快捷键提示）","ui/qml/components/Onboarding.qml (待建)",,P4,"首次启动展示一次并可跳过"
ZEN-200,NativeUtils,原生分享与触感反馈,"nsIZenCommonUtils: share/canShare/playHapticFeedback；Windows/Mac 平台实现","src/zen/toolkit/common/nsIZenCommonUtils.idl; src/zen/toolkit/common/windows/ZenShareInternal.cpp; src/zen/toolkit/common/cocoa/ZenShareInternal.mm; src/zen/toolkit/common/cocoa/ZenHapticFeedback.mm","",,"供 Services.zen.* 调用；与 UI 的 copy/share 行为联动","在 XBrowser：如要系统分享/触感，需写 Windows 原生集成（可后置）","",ZEN-092,P4,"可选：具备系统分享能力或明确不做"
ZEN-210,Menubar,菜单栏与窗口 scheme,"ZenMenubar 处理菜单栏/窗口配色方案等（不同平台差异）","src/zen/common/modules/ZenMenubar.mjs","zen.view.window.scheme; zen.view.mac.show-three-dot-menu","prefs","与 urlbar 全局动作/窗口按钮布局相关","在 XBrowser：Windows-only 可简化，但需定义窗口主题/标题栏按钮策略","ui/qml/BrowserWindow.qml",,P3,"窗口/标题栏控件布局策略明确并可配置"
ZEN-220,Core/Polyfill,:has 选择器观察与属性桥,"ZenHasPolyfill 提供 observeSelectorExistence/connectObserver 等，用于 compact mode 等自动显示逻辑","src/zen/common/modules/ZenHasPolyfill.mjs","",,"以 JS 观察 DOM 状态，驱动 attribute 供 CSS 使用","在 XBrowser：用 QML States/Bindings/Connections 实现等价的状态派生与样式切换","ui/qml/components/*",ZEN-140,P2,"UI 状态派生清晰（popup open/hover/focus）且不靠到处写 if"
ZEN-221,Migration,UI/配置迁移,"记录迁移版本与一次性迁移动作（如按钮自动加入）","src/zen/common/sys/ZenUIMigration.sys.mjs; src/zen/common/modules/ZenUIManager.mjs","zen.ui.migration.version; zen.ui.migration.compact-mode-button-added","prefs","避免升级后 UI 断裂","在 XBrowser：为 settings/session 引入 schemaVersion + 迁移器","(建议新增) src/core/Migrations.*",ZEN-162,P2,"配置文件带版本号且至少支持一次迁移示例"

