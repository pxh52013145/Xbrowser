ID,Area,Interaction,Zen_Behavior,Zen_Ref,UX_Spec_Ref,XBrowser_Current,XBrowser_Task,Suggested_Files,DependsOn,Priority,Milestone,Status,Done_Criteria,Test_Steps
META-NEXT-V4-001,Meta,本CSV用于追踪「Zen差距补齐：核心浏览器能力/Zen特色交互/工程化交付」的后续迭代；目标：把“能长期开发/可交付/可回归测试”的能力补齐。,"Zen体验=路径短+状态可预期+弹层永不被遮挡+关键能力齐全(书签/历史/查找/打印/多窗口/配置化)。",,docs/UX_SPEC.md,当前已完成侧栏/多选批量/分屏拖拽与持久化/扩展入口与弹层/运行部署闭环；但核心浏览器能力与多窗口/数据层仍缺失。,"建立下一阶段(M5~M7)的任务拆解：每行可验收+可回归；实现后把 Status 从 todo 改为 done。",reference/zen_browser_next_plan_v4.csv,,META,M5,todo,本表 NEXT-V4-* 全部可逐步落地并有测试步骤。,"打开CSV -> 抽查5行：均有明确 Done_Criteria + Test_Steps"
NEXT-V4-001,Settings,设置中心(统一入口+分类页),"Zen/主流浏览器都有明确 Settings 入口：基础/隐私/外观/快捷键/扩展/关于。",,docs/UX_SPEC.md,当前设置分散在菜单与零散对话框，缺少集中“设置中心”。,新增 SettingsDialog/SettingsPage：左侧分类+右侧内容；所有设置项统一落到 AppSettings/Stores 并可持久化。,ui/qml/components/SettingsDialog.qml (new); src/core/AppSettings.*; ui/qml/BrowserWindow.qml,,P0,M5,todo,存在可打开的设置中心且至少包含：外观/运行/快捷键/关于。,打开 Tools->Settings -> 修改3项 -> 重启 -> 保持生效
NEXT-V4-002,Data,书签(Bookmarks)基础能力(增删查),"Zen/主流浏览器：收藏当前页、书签管理、侧栏/面板入口、导入导出。",,docs/UX_SPEC.md,暂无书签数据层与UI。,新增 BookmarkStore(+JSON/SQLite) 与 BookmarksPanel：支持添加/删除/搜索/打开；地址栏提供“⭐”按钮。,src/core/BookmarksStore.* (new); ui/qml/components/BookmarksPanel.qml (new); ui/qml/BrowserWindow.qml,NEXT-V4-001,P0,M5,todo,可收藏当前页并在书签面板中搜索/打开/删除。,收藏当前页 -> 关闭/重启 -> 书签仍在 -> 搜索并打开
NEXT-V4-003,Data,历史(History)记录+查看+清理,"Zen/主流浏览器：按时间记录访问；历史页/面板；可清理。",,docs/UX_SPEC.md,暂无历史数据层与UI；仅在无历史时 toast “No history”。,监听导航提交事件写入 HistoryStore；提供 HistoryPanel/HistoryPage；支持按天分组与清理。,src/core/HistoryStore.* (new); src/engine/webview2/WebView2View.*; ui/qml/components/HistoryPanel.qml (new),NEXT-V4-001,P0,M5,todo,能看到历史列表(含title/url/time)并可清理指定时间范围。,访问3个站点 -> 打开历史面板 -> 显示3条 -> 清理今天 -> 列表为空
NEXT-V4-004,Navigation,页内查找(Find-in-page)条,"Zen: Ctrl+F 打开查找条，高亮匹配，支持上下一个/关闭。",,docs/UX_SPEC.md,暂无页内查找。,实现 FindBar：Ctrl+F 呼出；对当前 WebView2 执行查找(DevTools协议/JS注入方案择一)。,ui/qml/components/FindBar.qml (new); src/engine/webview2/WebView2View.*,,P0,M5,todo,Ctrl+F 可查找并高亮；Enter/Shift+Enter 跳转；Esc关闭。,打开网页 -> Ctrl+F -> 输入常见词 -> 高亮并可跳转
NEXT-V4-005,Output,打印/另存为PDF,"Zen/主流浏览器：Ctrl+P 打印；可保存PDF。",,docs/UX_SPEC.md,暂无打印/PDF。,接入 WebView2 Print/PrintToPdfAsync：提供 PrintDialog 与 Save PDF 路径选择。,src/engine/webview2/WebView2View.*; ui/qml/components/PrintDialog.qml (new),,P1,M6,todo,Ctrl+P 可打开打印；保存PDF成功生成文件。,打开网页 -> Ctrl+P -> 保存PDF -> 文件可打开
NEXT-V4-006,Windows,多窗口(New Window/Close Window/Window->Tabs),"Zen支持多窗口与(部分)tab tear-off；至少应支持新窗口与跨窗口打开链接。",,docs/UX_SPEC.md,当前单窗口。,抽象 WindowController：支持 New Window；命令与菜单入口；窗口间共享(或隔离)Workspace/Session策略定型。,src/app/main.cpp; src/core/WindowController.* (new); ui/qml/Main.qml (update),NEXT-V4-001,P1,M6,todo,可打开第二个窗口且各自可独立浏览；关闭后不崩溃。,打开新窗口 -> 两窗口分别打开不同网址 -> 关闭其中一个 -> 另一个仍可用
NEXT-V4-007,Profiles,多Profile/隐身模式(Incognito),"Zen/主流浏览器：至少支持隐身窗口；Profile用于隔离扩展/缓存/数据。",,docs/UX_SPEC.md,当前仅单一 WebView2 userData 目录。,为 WebView2 提供 profileId/userDataFolder；隐身使用临时目录并退出即清理；扩展按profile隔离。,src/engine/webview2/WebView2View.*; src/core/ProfileStore.* (new); src/core/AppPaths.cpp,NEXT-V4-006,P1,M6,todo,可打开“隐身窗口”且关闭后无历史/缓存残留(最小可验收)。,打开隐身窗口->访问站点->关闭->再开隐身->历史为空
NEXT-V4-008,Tabs,Tab搜索/快速切换(Switcher),"Zen有快速切换/搜索tab的体验；侧栏tab多时必须可搜。",,docs/UX_SPEC.md,目前仅侧栏列表与基础过滤。,"新增 Tab Switcher：Ctrl+K/Ctrl+P 搜索tab(title/url)并回车切换；支持最近使用排序。",src/core/TabModel.*; ui/qml/components/TabSwitcher.qml (new),NEXT-V4-001,P1,M5,todo,可在弹层中搜索tab并切换焦点到对应pane/tab。,打开10个tab -> Ctrl+K -> 输入关键字 -> 回车切换正确
NEXT-V4-009,Extensions,扩展管理页(权限/详情/更新提示),"Zen/Chromium扩展页：查看详情/权限/版本/更新；支持快捷操作。",,docs/UX_SPEC.md,已有扩展列表/启用禁用/固定/弹窗入口，但缺少“详情页/权限信息/更新提示”。,扩展管理页增加详情抽屉：permissions/host permissions(可先展示元信息)；支持检查更新(若WebView2支持)。,ui/qml/components/ExtensionsDialog.qml; src/engine/webview2/BrowserExtensionsModel.*,,P1,M6,todo,扩展列表可打开详情视图并展示至少：id/name/version/enabled/pinned。,"安装扩展->打开详情->信息完整；禁用/启用可即时反映"
NEXT-V4-010,Sidebar,侧栏面板体系(书签/历史/下载/扩展)统一入口,"Zen的侧栏不仅是tabs，还有多个面板入口，且不被WebView遮挡。",,docs/UX_SPEC.md,目前下载/扩展多为独立dialog/overlay。,"引入 SidebarPanels：统一在侧栏/顶部按钮打开书签/历史/下载/扩展面板；复用 OverlayHost/PopupManager。",ui/qml/BrowserWindow.qml; ui/qml/components/SidebarPanels.qml (new),NEXT-V4-001,P1,M6,todo,侧栏可切换至少2种面板且打开/关闭路径短且不遮挡。,打开书签面板->切换到下载面板->返回tabs列表
NEXT-V4-011,Shortcuts,快捷键可配置(最小闭环),"Zen/主流浏览器：至少能查看快捷键；进阶可自定义。",,docs/UX_SPEC.md,已有固定快捷键映射，但不可配置。,新增 ShortcutStore：默认映射+用户覆盖；Settings中可编辑(简单文本/表格)。,src/core/ShortcutStore.* (new); ui/qml/components/ShortcutsEditor.qml (new),NEXT-V4-001,P2,M7,todo,可修改1个快捷键并立即生效且重启保持。,设置里修改“新标签”快捷键->立刻可用->重启后仍可用
NEXT-V4-012,Stability,可视化日志/诊断面板(开发用),"Zen遇到问题有线索；开发期需要快速定位：版本/路径/运行时/内核状态。",,docs/UX_SPEC.md,已有日志文件与WebView2缺失提示，但缺少应用内诊断页。,新增 DiagnosticsDialog：展示版本/Qt/WebView2版本/路径/最近错误/打开日志按钮。,ui/qml/components/DiagnosticsDialog.qml (new); src/core/AppPaths.*,,P2,M6,todo,可从菜单打开诊断页并一键打开日志文件夹。,触发一次错误->打开诊断页->看到错误摘要->点击打开日志目录
NEXT-V4-013,Packaging,Release打包(稳定可交付目录/Installer),"Zen可交付；XBrowser需能产出一份可运行的release目录/安装包。",,docs/BUILDING.md,目前以开发部署为主(依赖windeployqt)。,新增 `scripts/package.ps1` 生成 `dist/`；可选 NSIS/MSIX 打包流程(先文档)。,scripts/package.ps1 (new); docs/BUILDING.md,,P2,M7,todo,`dist/Release` 内双击可运行且不依赖Qt PATH。,运行 package -> 在无Qt环境机器测试运行(或通过 clean env 验证)
NEXT-V4-014,Privacy,站点权限中心(全局管理+按站点),"Zen/主流浏览器：集中管理通知/摄像头/麦克风/地理位置等权限。",,docs/UX_SPEC.md,已有站点权限面板(按站点)，但缺少全局管理页与批量清理。,新增 PermissionsCenter：列出已记录站点权限并可搜索/重置；与 SitePermissionsStore 打通。,src/core/SitePermissionsStore.*; ui/qml/components/PermissionsCenter.qml (new),NEXT-V4-001,P2,M6,todo,可查看所有已记录站点权限并一键重置。,访问站点触发权限->允许->在权限中心看到->点击重置->返回为默认
